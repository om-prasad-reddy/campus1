<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus1</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        #header-container {
            margin-bottom: 5px;
        }
        .bg-gradient-hero {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
        }
        .bg-gradient-primary {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
        }
        .text-primary-foreground {
            color: #ffffff;
        }
        .text-primary-light {
            color: #e0e7ff;
        }
        .bg-primary {
            background-color: #4f46e5;
        }
        .hover\:bg-primary-dark:hover {
            background-color: #4338ca;
        }
        .shadow-primary {
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
        }
        .border-white\/30 {
            border-color: rgba(255, 255, 255, 0.3);
        }
        .hover\:bg-white\/10:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .bg-white\/90 {
            background-color: rgba(255, 255, 255, 0.9);
        }
        .hover\:bg-white\/90:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }
        .bg-secondary {
            background-color: #f3f4f6;
        }
        .text-foreground {
            color: #1f2937;
        }
        .text-muted-foreground {
            color: #6b7280;
        }
        .border-primary {
            border-color: #4f46e5;
        }
        .text-primary {
            color: #4f46e5;
        }
        .hover\:bg-primary:hover {
            background-color: #4f46e5;
        }
        .hover\:text-primary-foreground:hover {
            color: #ffffff;
        }
        .group:hover .group-hover\:shadow-primary {
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
        }
        .footer-container {
            margin-bottom: 1px;
        }
        .auth-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            font-size: 18px;
            color: #4f46e5;
        }
        .hidden { display: none !important; }
    </style>
</head>
<body class="min-h-screen">
    <div id="header-container"></div>
    
    <!-- Hero Section -->
    <section class="bg-gradient-hero text-primary-foreground py-20 px-6">
        <div class="container mx-auto">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <!-- Content -->
                <div class="space-y-8">
                    <h1 class="text-5xl lg:text-6xl font-bold leading-tight">
                        Transform Your <span class="text-primary-light">Career Today</span>
                    </h1>
                    <p class="text-xl text-primary-foreground/90 leading-relaxed max-w-lg">
                        Get accredited degrees and professional certifications online. Join 
                        thousands of students advancing their careers with our comprehensive programs.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <a href="courses.html" class="bg-primary hover:bg-primary-dark text-primary-foreground shadow-primary px-6 py-3 text-lg rounded-md inline-flex items-center">
                            Explore Courses
                            <i data-lucide="arrow-right" class="ml-2 h-5 w-5"></i>
                        </a>
                        <a href="register.html" class="border-white/30 text-primary-foreground hover:bg-white/10 px-6 py-3 text-lg rounded-md border">
                            Start Free Trial
                        </a>
                    </div>
                </div>
                <!-- Hero Image -->
                <div class="relative">
                    <div class="rounded-2xl overflow-hidden shadow-2xl">
                        <img 
                            src="https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=400&h=500&fit=crop" 
                            alt="Students learning with books and laptop" 
                            class="w-full h-[400px] lg:h-[500px] object-cover"
                        />
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Stats Section -->
    <section class="py-16 px-6 bg-secondary">
        <div class="container mx-auto">
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="text-center">
                    <div class="text-4xl lg:text-5xl font-bold text-primary mb-2">50,000+</div>
                    <div class="text-muted-foreground font-medium">Students Enrolled</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl lg:text-5xl font-bold text-primary mb-2">200+</div>
                    <div class="text-muted-foreground font-medium">Courses Available</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl lg:text-5xl font-bold text-primary mb-2">150+</div>
                    <div class="text-muted-foreground font-medium">Certifications</div>
                </div>
                <div class="text-center">
                    <div class="text-4xl lg:text-5xl font-bold text-primary mb-2">4.8</div>
                    <div class="text-muted-foreground font-medium">Average Rating</div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Features Section -->
    <section class="py-20 px-6">
        <div class="container mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-foreground mb-4">Why Choose Campus1?</h2>
                <p class="text-xl text-muted-foreground max-w-2xl mx-auto">
                    We provide world-class education with the flexibility you need to succeed
                </p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="text-center group">
                    <div class="w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto mb-6 group-hover:shadow-primary transition-all duration-300">
                        <i data-lucide="monitor" class="h-8 w-8 text-primary-foreground"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-foreground mb-3">Online Learning</h3>
                    <p class="text-muted-foreground leading-relaxed">
                        Study from anywhere with our flexible online platform
                    </p>
                </div>
                <div class="text-center group">
                    <div class="w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto mb-6 group-hover:shadow-primary transition-all duration-300">
                        <i data-lucide="award" class="h-8 w-8 text-primary-foreground"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-foreground mb-3">Accredited Degrees</h3>
                    <p class="text-muted-foreground leading-relaxed">
                        UGC recognized degrees and industry-standard certifications
                    </p>
                </div>
                <div class="text-center group">
                    <div class="w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto mb-6 group-hover:shadow-primary transition-all duration-300">
                        <i data-lucide="clock" class="h-8 w-8 text-primary-foreground"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-foreground mb-3">Flexible Schedule</h3>
                    <p class="text-muted-foreground leading-relaxed">
                        Learn at your own pace with recorded and live sessions
                    </p>
                </div>
                <div class="text-center group">
                    <div class="w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto mb-6 group-hover:shadow-primary transition-all duration-300">
                        <i data-lucide="users" class="h-8 w-8 text-primary-foreground"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-foreground mb-3">Expert Faculty</h3>
                    <p class="text-muted-foreground leading-relaxed">
                        Learn from industry experts and experienced professors
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- CTA Section -->
    <section class="py-20 px-6 bg-gradient-primary text-primary-foreground">
        <div class="container mx-auto text-center">
            <h2 class="text-4xl lg:text-5xl font-bold mb-6">
                Ready to Start Your Learning Journey?
            </h2>
            <p class="text-xl text-primary-foreground/90 mb-10 max-w-2xl mx-auto">
                Join thousands of students who have transformed their careers with our programs
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="register.html" class="bg-white text-primary hover:bg-white/90 shadow-lg px-6 py-3 text-lg rounded-md">
                    Get Started Today
                </a>
                <a href="courses.html" class="border-white/30 text-primary-foreground hover:bg-white/10 px-6 py-3 text-lg rounded-md border">
                    Browse Courses
                </a>
            </div>
        </div>
    </section>
    
    <div id="footer-container"></div>
    
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Function to render courses
        function renderCourses() {
            const grid = document.getElementById("courses-grid");
            if (!grid) return;
            
            grid.innerHTML = ""; // Clear existing content
            courses.forEach(course => {
                const card = document.createElement("div");
                card.className = "bg-white rounded-lg shadow-lg overflow-hidden";
                card.innerHTML = `
                    <img src="${course.image}" alt="${course.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-foreground mb-2">${course.title}</h3>
                        <p class="text-muted-foreground mb-2">${course.university}</p>
                        <p class="text-muted-foreground mb-2">${course.level}</p>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-400">â˜…</span>
                            <span class="text-muted-foreground ml-1">${course.rating}</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-primary font-bold">${course.price}</span>
                            <span class="text-muted-foreground line-through">${course.originalPrice}</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            // Re-render Lucide icons after dynamic content
            lucide.createIcons();
        }
        
        // Load courses if the grid exists
        if (document.getElementById("courses-grid")) {
            renderCourses();
        }

        // Authentication functions
        function checkPersistentLogin() {
            const persistentLogin = localStorage.getItem("persistentLogin");
            const loggedInUser = localStorage.getItem("loggedInUser");
            
            // If user is not currently logged in but has persistent login data
            if (!loggedInUser && persistentLogin) {
                try {
                    const persistentData = JSON.parse(persistentLogin);
                    const expirationDate = new Date(persistentData.expiresAt);
                    const now = new Date();
                    
                    // Check if persistent login hasn't expired
                    if (now < expirationDate) {
                        // Restore login session
                        const userData = { ...persistentData };
                        delete userData.expiresAt;
                        delete userData.rememberMe;
                        
                        localStorage.setItem("loggedInUser", JSON.stringify(userData));
                        console.log('Restored login session from persistent storage');
                        
                        // Update header
                        if (typeof window.updateHeader === 'function') {
                            window.updateHeader();
                        }
                        
                        return true; // Indicates session was restored
                    } else {
                        // Persistent login expired, remove it
                        localStorage.removeItem("persistentLogin");
                        console.log('Persistent login expired and removed');
                        return false;
                    }
                } catch (error) {
                    console.error('Error checking persistent login:', error);
                    localStorage.removeItem("persistentLogin");
                    return false;
                }
            }
            return false; // No persistent login data or already logged in
        }

        // Check authentication status and redirect accordingly
        function checkAuthAndRedirect() {
            const loggedInUser = localStorage.getItem("loggedInUser");
            
            if (loggedInUser) {
                // User is already logged in, redirect to dashboard
                console.log('User is already logged in, redirecting to dashboard...');
                window.location.href = 'dashboard.html';
                return true; // Indicates redirect happened
            } else {
                // User is not logged in, stay on index page
                console.log('User is not logged in, staying on index page');
                return false; // Indicates no redirect
            }
        }

        // Load header
        function loadHeader() {
            return fetch('header.html')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load header');
                    }
                    return response.text();
                })
                .then(html => {
                    document.querySelector('.header-container').innerHTML = html;
                    
                    // Load header script
                    return new Promise((resolve) => {
                        const script = document.createElement('script');
                        script.src = 'header.js';
                        script.onload = () => {
                            if (typeof window.updateHeader === 'function') {
                                window.updateHeader();
                            }
                            resolve();
                        };
                        document.body.appendChild(script);
                    });
                })
                .catch(error => {
                    console.error('Error loading header:', error);
                    // Fallback header if loading fails
                    document.querySelector('.header-container').innerHTML = `
                        <header class="bg-white shadow">
                            <div class="container mx-auto px-4 py-3">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center space-x-2">
                                        <i data-lucide="graduation-cap" class="h-8 w-8 text-indigo-600"></i>
                                        <span class="text-xl font-bold text-gray-900">Campus1</span>
                                    </div>
                                    <nav>
                                        <ul class="flex space-x-4">
                                            <li><a href="index.html" class="text-gray-700 hover:text-indigo-600">Home</a></li>
                                            <li><a href="courses.html" class="text-gray-700 hover:text-indigo-600">Courses</a></li>
                                            <li><a href="login.html" class="text-gray-700 hover:text-indigo-600">Login</a></li>
                                            <li><a href="register.html" class="bg-indigo-600 text-white px-4 py-2 rounded-md">Register</a></li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </header>
                    `;
                    lucide.createIcons();
                });
        }

        // Load footer
        function loadFooter() {
            return fetch('footer.html')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load footer');
                    }
                    return response.text();
                })
                .then(html => {
                    document.querySelector('.footer-container').innerHTML = html;
                    if (window.lucide && typeof window.lucide.createIcons === 'function') {
                        window.lucide.createIcons();
                    }
                })
                .catch(error => {
                    console.error('Error loading footer:', error);
                    // Fallback footer if loading fails
                    document.querySelector('.footer-container').innerHTML = `
                        <footer class="bg-gray-800 text-white py-8">
                            <div class="container mx-auto px-4">
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                                    <div>
                                        <div class="flex items-center space-x-2 mb-4">
                                            <i data-lucide="graduation-cap" class="h-8 w-8 text-indigo-400"></i>
                                            <span class="text-xl font-bold">Campus1</span>
                                        </div>
                                        <p class="text-gray-400">Transform your career with our accredited online programs.</p>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                                        <ul class="space-y-2">
                                            <li><a href="index.html" class="text-gray-400 hover:text-white">Home</a></li>
                                            <li><a href="courses.html" class="text-gray-400 hover:text-white">Courses</a></li>
                                            <li><a href="about.html" class="text-gray-400 hover:text-white">About Us</a></li>
                                            <li><a href="contact.html" class="text-gray-400 hover:text-white">Contact</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Programs</h3>
                                        <ul class="space-y-2">
                                            <li><a href="#" class="text-gray-400 hover:text-white">Bachelor's Degrees</a></li>
                                            <li><a href="#" class="text-gray-400 hover:text-white">Master's Degrees</a></li>
                                            <li><a href="#" class="text-gray-400 hover:text-white">Certificate Programs</a></li>
                                            <li><a href="#" class="text-gray-400 hover:text-white">Professional Development</a></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
                                        <address class="text-gray-400 not-italic">
                                            <p>123 Education Street</p>
                                            <p>Learning City, LC 12345</p>
                                            <p class="mt-2">Email: info@campus1.com</p>
                                            <p>Phone: (123) 456-7890</p>
                                        </address>
                                    </div>
                                </div>
                                <div class="border-t border-gray-700 mt-8 pt-6 text-center">
                                    <p class="text-gray-400">&copy; 2023 Campus1. All rights reserved.</p>
                                </div>
                            </div>
                        </footer>
                    `;
                    lucide.createIcons();
                });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // First load header and footer
            Promise.all([loadHeader(), loadFooter()])
                .then(() => {
                    console.log('Header and footer loaded successfully');
                    
                    // Then check authentication
                    const sessionRestored = checkPersistentLogin();
                    
                    // Delay auth check slightly to allow header/footer to render
                    setTimeout(() => {
                        const redirected = checkAuthAndRedirect();
                        
                        if (!redirected) {
                            console.log('User staying on index page');
                        }
                    }, sessionRestored ? 300 : 100);
                })
                .catch(error => {
                    console.error('Error loading header or footer:', error);
                    // Still check auth even if header/footer failed
                    setTimeout(() => {
                        checkAuthAndRedirect();
                    }, 100);
                });
        });
    </script>
</body>
</html>